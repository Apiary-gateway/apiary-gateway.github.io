---
import SidebarScrollLayout from '../layouts/SidebarScrollLayout.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import Introduction from '../content/case-study/introduction.astro';
import Background from '../content/case-study/background.astro';
import ExistingSolutions from '../content/case-study/existing-solutions.astro';
import OurSolution from '../content/case-study/our-solution.astro';

// Define the structure of your case study content
const headings = [
  {
    id: "introduction",
    title: "Introduction",
    children: [
      {
        id: "what-is-apiary",
        title: "What is Apiary"
      },
    ]
  },
  {
    id: "background",
    title: "Background",
    children: [
      {
        id: "foundation-models",
        title: "Foundation Models and Model-as-a-Service"
      },
      {
        id: "challenges",
        title: "Challenges of Working with LLMs"
      },
      {
        id: "multiple-llms",
        title: "Why Use Multiple LLMs?"
      },
      {
        id: "abstraction",
        title: "A New Layer of Abstraction"
      }
    ]
  },
  {
    id: "existing-solutions",
    title: "Existing Solutions",
    children: [
      {
        id: "overview",
        title: "Overview"
      },
      {
        id: "tradeoffs",
        title: "Tradeoffs"
      }
    ]
  },
  {
    id: "our-solution",
    title: "Our Solution",
    children: [
      {
        id: "differentiators",
        title: "Differentiators"
      },
      {
        id: "target-audience",
        title: "Who Apiary Is For"
      },
      {
        id: "getting-started",
        title: "Using Apiary"
      }
    ]
  }
];

// Helper: Build child image map
function extractChildImages(children = []) {
  return Object.fromEntries(
    children
      .filter((child) => child.img)
      .map((child) => [child.id, child.img])
  );
}
---

<BaseLayout>
  <SidebarScrollLayout headings={headings}>
    <slot>
      {headings.map(({ id }) => (
        <>
          {id === 'introduction' && <Introduction />}
          {id === 'background' && <Background />}
          {id === 'existing-solutions' && <ExistingSolutions />}
          {id === 'our-solution' && <OurSolution />}
        </>
      ))}
    </slot>
  </SidebarScrollLayout>
</BaseLayout>
